--.                                                                       xUXc                                                                          
--                                                                         ;s2c.       :                                                                
--.                                                              ;.         ,ssUtc;    rB2                                                              
--                                                               ,#@Hc;,      csZUcT:  ,S6g                                                             
--.                                                                t@B@BD2r    C;iLjTt..ssSF   .                                                        
--                                                                  ;@BbbHDgr   U:cFcc0FrjsPF  .       ...                                              
--                                                                   rUnSPng@tr ri:7T;CUr7LSn:   .rtnsOnSxxstSntncr:                                    
--                                                .rtXZXF2xStj7r:,    rsCU27Fdntrc:;rriTrs5ssrTs5Fr;:;rrr;;;;:,:;rr506t:                                
--                                            ,cgXZs7:.     ..::;ricT;rr5US5rrO0jr:.;rrx7L5TiF0r.;c5OCjjsccrjstcirir;;rLZ;                              
--                                         ;tCi;.  .:rit5nCFS5jr;:.,,cgSrxgins;tZs;..r7s;s5nPL  g@Sr;,..       ..;rTCnc: r0;                            
--                                      ,SUi.  ;jF6ggOX5Lrr;rrrrccCc:  ;XsLX;Lcrsnxr,.rL;7CB; .bB;,.:::,,....       .;LXU  0r                           
--                                     Zb;  ;O8B0Cr;;,.      . ..,:s2;   Z;rC;crrxOt;,:5irZS .7@,,::,,,.,... .       ..;Xn  8,                          
--                                   c@7  rd8Fi;:,,.. ..,..         xL.  TO:ixiL;rLnr;rrr;B8.,rPr.                    . rn: Ct                          
--                                 ,F@;  sdn;, ..,,,.              ;;,.  dPrxTLxc7r57rU;.;B@L. ,iTi.                    ri. Zr                          
--                                tFdj .;UX;.   ..,             ,;:    .cB; ;cZji,;;5rci;r@:;gT   ;rr;               .:;; .,H;                          
--                              x0c 5c.;::;;;;;;:;.... . . .        ;r;rbB, .rj2n0Pd@DXC7g; rC@@X;    .,:r7r;.  .,;rc7;. .:,isO.                        
--                           ,SPc..:5Xjr;...,,,.,,...           .;r;, .#bini.j@#PCi;;;;. s;jHtTcFb#xc.  ;. ,:;i         rc :r5St                        
--                         rFi   rtXiLOO5tciiT;,........:;:Lci5x7;   xBd;;0x:CP,     .   ; cX2ZP5rrTi;c0  ..;  L;,,;rcSO87;r2@Xg                        
--                            .;cOdx,:LXdXZSFSXZnCCcirr;;;UL     .rrPXr:r50nr7i .;LCOSXt;r ;x:rTxxFxc:Sc gi ;2 x;  ;7tC;r7,FcscX                        
--                          :srCHX0i  ,,rg;;r;;rr;;r;;,..s. ;i;.  ,t;..cO2Zx;rsgB@Bdn5L088rsSrrir;:;;rZ2;Zr;jg.ZrrcTLcir,FnSct5;                        
--                         tUi2PtZB;  i. scrr;;;;rrrrr;,;i .XrrsC; .rrEBBB@B8B@B#06ZFjr,TOPFT;;rTir;;:iLr;CUXrrL,        .rs5s;.;;,                     
--                       ;Ctjt7t8D6C .75 tF7cLTsTLjirr;r;STTBj;;nL;ssr5sijsZFPEPjcF2XPCiiitO#Frr;rj2r;.,ii:;r5T;rr;rrrrr;;;is@Br.. :,.                  
--                     ,rscTi;OB8SgU7gXLgxr;7rrrrrr;::::;rUcxZssU;jUgFts5xStCsxCUCSC200istLL8B@SSb@bL;cr;:;iscj7j7rrCL:,:;riTs@BPi,                     
--                   ,irc6Xi;n86ZsZ0bUrLsr;rrcTsLLTsLsccir;ri7rr;xDxUBHDd6EgXH6ZCUF0Oc#FrFTTSBnXbB6D00#BgUUP0OCStxS02iE0O5COxji2B86#L.                  
--                 ;tT:;FgTrUggFSrFDPc;.csc,    ,.,,:,,.   ,Lsss5cr;;;;:, .,;TL5CcXZtxg67C6UnciLcrisOB@B6OF5i;;;r760s;5XOjcsXtcscg@b0sLcr;.             
--              :jji:  ZdirtxxxSjLF#SccrS@b8PgFc;;...:,;;;:.,;cEUCrrctrr:       .;iDSc5n0#Tcc;;;;cLSEs:.,;.. .;5d@BH0Z5Usj;rsnCs5ntEE:   ;;:..          
--           :r;,     tBjTSCtt#tStZ#sT7;0BFCZ6BB@B@BgSSCsiSEPPXT5sgExrrrt#@dXxr    .CPiX@tsr;:rcr;;:  .;ssriUHDZ2Cs5SUZtLcjcLcjijr7jn8U,                
--         .         rB2cg2Cc@6ScF8Etg;:SZcCS68B@@B#H6scrUB0CLjiCCr;;CLrXgn6d8B@n:   rb@gi  .::;;Cc7;cSCtsr;;it2ss;.,;:;;;;r;;;ir7LtsjC8S;              
--                  .@Fr8cr50BD7C0HgZ6Tj68dP0X6#dP#8@Ennni;rrrcTTrriS5xZFtSStrsg8B8;  FB#  rrir2OjXnHB@Xr:r;;;r;7g85..rsdB@B@D2sLrTctt550POc:           
--           :.     E676r;igX@jt8UgBC5C6XCjLsxZdDb#@crccrrcFx5cUjicrcXZTjLTLrrt5sBB@B.r@;,#biT;;;;r5rrx@B@HHFr;7r;i@#E0gP6OOnPb8#OjTcsxFnXPdHFc;        
--           ,PB@B6dSsOsrs62dSrcirrcrrrrcc2OUnEZ0D@0xFX5ZEDXtiT;rL;:ns:;r;;.:rrjBB@@@BBBtB@cHjr:;;rc77.;i8@rcgUirr;rB2:;r;;;;;rcSO#0SscTLsCt5LsSZT;     
--              ;CE025r;;j2UsstsTjsscccjxSLOPnxZD#XDEd808P;.:;,;;  ;:  .    r:r2B@DBB@@@B@B;r8;r;:r;:i;rrr6b,.;nDC;:rBL;;irr;;:;;;;cjtcj55Tjc7rristF5Tr 
--               ,FSriLTsri7rrr;;;;;;;ic7igFirCXtL#O0HiTx, .,              :;,sx;.,:;rU@@B@s;gtr;.;.: 7;trCBF,;.PBH;,iPrr;rrir;;:,,,;;;7sLsj5LLir:.     
--             .jHgjcjTXS5FjrrrrrrrTsUZsC#r,t2sssgOFt;.r         .      . ,r,rZr,;;;:,.;:;Xi;rd,...   ;;srjHU,;trr##t,siisc7rrrcrr;r;rrr;;;7rr;ricii;:  
--          :;iXHZ7rTLUU6Ziricicc2Ot68HX8;;F5icgDBsr; .         ..   .r ;;ri;tn,:;;;:::.. c; ;@  .    . s;rTx.rPt,LSHjLr  .   ,:;;rrr;;,....,;rr;.      
--     .:rir;rcrLLrc7icCLTCFndHZxFXdxcx6s.rr7L8DBxr  .   .    .. ...:Tc:rcstrC; ,;:,.:,, ,t. L2 ;.,.    j;;rc:5Sr5;CEFOZ7S5r;, ,       .:;;:.           
--;;P6dXj;;rr;;rLrirr;;r;rsCtTcsCFZcr;sH;.:c7gXxS;  .:. .;,.;,, .::r, gTxr;255:   .   .  ir  B;:;:;.. ,.t;;j;;OTrcxr7Xjxsd@b08DxxEB@@#L:.               
--      ,ri7;,;:;;:;;rrsSSiirisxjj:,;LBs,;x;TOsX;.  ;:. :;;;rrrrcrr:  2gT  ZxL          ;jr.Z@.r;;;;,;,:L;ri jT7trCFrr0LrcTjr;r;;sHSH@BbS7;:.           
--    .rr:,   .,rc55O5sUFisCn5ssFsxn8Bgr;xrrTsLL . :;;  ;rF rtT:Ojr   ;#r  iLi          c;rU@,7c:;r:;;rt;Ts:rdxisjin2,iZ,csTLLr;rrtT;jCxFjsir;ric;;,    
--  7CLLr;;;rLt2xcir;rii;cCH6HB@bPb@BX;;crr5jjt:.,,;;, ;rF; sF. Es     Bc  ,Xi         i;Tit;rtr:;.r;;7c;nrsb@B6i;iLs7 Cr;5rTFtirLrC:;ist2Tx2xLr;.      
--XsP6XnFSU2Z2s7r;rrisUZPEZFxCS;,iDBP: ;;:jSciU:,,::;: ;jS  xc  D:     rt   Z5        ;i0;.rcc;:;:rLrrciiriB@#88@c .sO;;n;Sccj2srijLn;rr;:;:,           
--SsOO2t52sTr;:;;rFHgg2Cr;;rcLr;c8DL, ;;,ctcrCU:.T;rrr ;g   r. ,S       L   rO       iCS. cCr;, ;7;;srxrrXB@EcXXt@s  UC,ccrC7Urn;c57bi                  
--    ......;rrrEdsrrrcrriF2s7;r#Es. , ;CU;irTF ;xrcc, xDXDxPSrsO:,   . ;.   E:    :T;:  F2r;: ,c. irrtr#B08cjLCic@5  2rrT;T7C;i;:S;gP7.                
--       ..;:,. ...:rircccii;,,2UL: ;.:xE,rcrjC.rT;Lr  Xi56XObt2ZUS2Tr,. ... rx   .,   ,ssr;. .s;;c#Z#gPCnCg;Lr7Lr;@0 ;c;rrr7cc:c.jc5OS;,               
--Et5tZc;::;;;;;rcTrrr;,..;;  UBS, ::.LC ;si;ZT.ir;L;:r#8B@BDPOBD2ZC2FPSr..,: ,       ;rr;, ,r8OcrxinUg2OB@Drxr77i;i@t r.::,7i2 r,;LcTxX...             
--cc5CFScTiccircr7rr,  .;7;,,OBg, ;; rL ;Fir;dr:r;rxr2iDsr8x,CnxB..Cn5rsF6t;,;::,;:;;:,;:.;t2t;rcdDSxHd; ;rLrSr7,ti;s@: .::.;ri;;; irc;PZ. ,            
--    .:;;rr: ;;;;. ,;csi;:;UBc  rr ii ;Scs,rXrrr:jrrS5s  @r s#c6  . ;Lc;rLFFrir;;;;;;:;sSjr;rOOEBL;8BUs,  rcSi;,Tr;cs@   ;.;;c;r7,:rLrc0#;  .          
--       .;i;;;:;;rirsiLi;.rP;.;cc.r; ;tLsr,rxr;rrT7rrs5i;X@Fr,,rH@S  ,rsEC5L;;r;;;;;;;iUcLgUr   @Or:r ;B;.STxri;Lrr5ibi .;.;rc;;ts.:i;rEBBE            
--   :cSFc;;:;rr7r7rrcjr, ;Zrrcr; .  ijr;r:;rcU;risjc gc.:;j6B@#dP#Uji7;,.,.  ,:;:;;;;rTicLsjrrrrZ@BnZbbbCd;;.r;iciis;ZP. ..:;sr.isr;r   :C8@r          
--  rxCLrLsUjr:;;:.:;; .;C0;7jr,   .Ls;;: ;;r;Oriic5i L8.                     .,    .;TZr;.    ....;;;;; sT   ,;i;:Ci;S8r  . ;ic:;rir;;     .i.         
--       :cU6nc;r;;;;.;;5S;rr;.   ;xt;;.  r;;:SiictTi  B2                     .:      jr;:,              x,  .,;r :6;rjZn  ..:r;crc;rri                 
--           :rtZOLirr;5C;;:    ,sCr.;   ;rr,;cj;strr  rB ;r;rrrrrrt7,        .:     .i,,;,,.:r7;;;;;r;;0i  .  r, in.irUb  ,.rr;;iTi;:sr                
--                ,;;;OZcii;. ;isTr;;.  ,t;;;;;Zr;Ori   ;;c     7Ft;          .:     ,L,;;,.,.:cXHT,;,;BU:::. ,; ,x,rrrsb. ,;rt ;:Ucc;.Z;               
--               ,;;;cS7txs;.rtLcr;r,  .Cr:r;r.ZUrZri.    i    cT,            .:     :r:::....   rx,  iU;r,.  ;  L;;ir;rZ. :;CS;;:Exrr. i;              
--            ;Lnjjr;cctCr;rscrTcr;    ir;,c:r:5@P6nT,.   i .jF;              ,,     ;i.:.. . .   .SL7Usi;,  ;. ir.;rr;rX, ;iU;;;;xZrr,, .              
--         ,TL5jTr  iixsr;rt,.ijr:    ,C; :r,j:S0XdXt:..  rSL:               .,:     ;r,,. ..   .;: :tC67:  ;r ii,:r7T;U6, rsDi:r;sXLc,:.               
--       ,;;,      iLSs;  ;:,r5r:    .c;  : rr,tCisDg; .  .,                  ..     ;r.: . .      ;crPj:  ;c i5, ;TC;rdO: TZULtr.Tr;ir r               
--                Z2sr   i;:,ns.    ;c:.   :c;;;tc;r6P.                       .      :r..         20;FZ::.rL rt;  TC;;FDnT cXr:En.;r Fs  ;              
--               2E;   :xr  nc  .,,;X;.    :;rr:5sL;rB2                       .      .r:,       rBs rZrcriT.rT. ,5Trsggn6i LO::rUZ;i ;6;  ;             
--              7;    rT.  Cj,.; :,sr     ..;i;:r7xg,;Bc                    .;.       ;;..     Fg. ;nriLsr;xr..:ris0xCjsUi EnirirF2t  SC   :            
--             i.   ,r,   tir;r:;;,r       .;:  rit6C :8r                    ;:,.   .:r;.     ;.  ;jrr:;rcx;;r;rO6DCr5sSZ:;DOxr;2F2xr  8.   .           
--            ;    r:    sittLr7. ;r,      ;.; .LscZ0L ,c,                    .:;:.,:;:.         ,rj: ,rir;risC6E5riSxTgd:tssO6jigEnCr rP               
--                     ;STUSi.    T;.   . ; ., ,icj2n8r ..                                      .;r  r2jsc5x0ZjSLLsjTsOPE;iri rPHFXgF ;.xr              
--                    i0xL;      rr,.. ; r. ,. ;rrtSTDdr.,.                                      . ;SXiiT2gP6jjT7jijxtXFTr;:c:  ;FOPBx   :              
--                  :PZr.        s,,r ;.;, .. ,;crn5CSP#;..                                      :r;. ,7rTnXnst;irrTUtT5cC. Z7    rrj6n                 
--                 c7.          .i.r,,;rr :,..;ir77tCsC0#: .                 ...,:,;;r;,        .,   rnr;c6r;r;;r;cOcrrgT:  Es     ,;r,T                
--                ,             sxr;,7;7.;r,..rjs,;TT;5T0g,          ,bBBP2ci;r;:,;:;;iTscjs6n; . . rL;;;tb,;;;jrrxs:;dd;   U5       c.                 
--                             .6; rsC.r Lr, ;xS7 7Cr;c5s#P, ...       .:rLti;;ritj7rriLtUCSnL:..:.;;.ir DS;r;TLLCi. ZBr    iU        .                 
--                             Si ;CZ,.c:Si.;TP5  ir;;TTcFOH:  ..           .,:..   .:;;;:.   ..::.  rr r0;LCr5Ssc, rBc     ;D                          
--                             t  EPr 7rLj:;sHT  Tcc:;srrCc00r   .             ,,::;:;,. .........  j;  OsiU;5XTir  X6       D                          
--                            L  :@U  STx:iT8r  ,Pc7:;c;;rTiXbj.        . .  .. . ....,.,...,.,.  :;C  ,;OO;iOSrx  ;@        r.                         
--                            ;  rds ;On:j2@;   d7 r,rL;;;rrs0t;;;.          ..,.....,........  ,; ;r   r0;;XCrP.  dj                                   
--                               iO  jBirXb.   U5  r;js;,;;;Z8r, ,;;,         .....     ...   :r:  i,   n;;dFtO;   g                                    
--                               6r :@r gg    sZ   r;jr;.r;r6# r    :;:.           . ....   ,r;    t   .OcHrrOr                                         
--                              :D  @i n7    rt    7sj;;:r:rHi r.     .;:.            .    ;;      7   rBd .dL                                          
--                              cs Cs ,     .;     ;Os.rcc7;n  ;;        ,:,             :,.       r   B6  Pb                                           
--                              0, .                Dr iCrr;s   r           ,;:,,.,...;;:         :;  sD  ;B:                                           
--                              0                   Zr ZU; ;    ;               .,,,              :.  j   Ux                                            
--                             .F                   nr dX       ;                                 ;  :   ,#                                             
--                             :r                   cc HZ                                         . ,    n7                                             
--                                                  ,n cX                                                Z                                              
--                                                   7 .i                                               rc                                              
--                                                      r                                               O                                               
--                                                      :                                               s                                               
--                                                                                                     ,;                                               
--                                                                                                                                                      
--

if myHero.charName ~= "Ezreal" then return end		


--require NOTHING!!


local Q = { Range = 1000, Delay = 0.25, Speed = 1200, Width = 60}
local W = { Range = 900, Delay = 0.25, Speed = 1200, Width = 80}
local E = { Range = 450, Delay = 0.25, Speed = 2000}
local R = { Range = 20000, Delay = 1.00, Speed = 2000, Width = 160}
local TEAM_ALLY = myHero.team
local TEAM_JUNGLE = 300
local TEAM_ENEMY = 300 - TEAM_ALLY
local huge = math.huge 	
local sqrt = math.sqrt  	
local abs = math.abs  	
local insert = table.insert

local _EnemyHeroes
local function GetEnemyHeroes()
	if _EnemyHeroes then return _EnemyHeroes end
	_EnemyHeroes = {}
	for i = 1, Game.HeroCount() do
		local unit = Game.Hero(i)
		if unit.isEnemy then
			table.insert(_EnemyHeroes, unit)
		end
	end
	return _EnemyHeroes
end

local function Ready(spell)
	return myHero:GetSpellData(spell).currentCd == 0 and myHero:GetSpellData(spell).level > 0 and myHero:GetSpellData(spell).mana <= myHero.mana and Game.CanUseSpell(spell) == 0 
end

local function EnableOrb(bool)
	if Orb == 1 then
		EOW:SetMovements(bool)
		EOW:SetAttacks(bool)
	elseif Orb == 2 then
		_G.SDK.Orbwalker:SetMovement(bool)
		_G.SDK.Orbwalker:SetAttack(bool)
	else
		GOS.BlockMovement = not bool
		GOS.BlockAttack = not bool
	end
end

function ValidTarget(target, range)
	range = range and range or math.huge
	return target ~= nil and target.valid and target.visible and not target.dead and target.distance <= range
end

local function IsImmobileTarget(unit)
	for i = 0, unit.buffCount do
		local buff = unit:GetBuff(i)
		if buff and (buff.type == 5 or buff.type == 11 or buff.type == 29 or buff.type == 24 or buff.name == "recall") and buff.count > 0 then
			return true
		end
	end
	return false	
end

function PercentHP(target)
    return 100 * target.health / target.maxHealth
end

function PercentMP(target)
    return 100 * target.mana / target.maxMana
end

local function OnScreen(unit)
	return unit.pos:To2D().onScreen;
end

--[[local function GetTarget(range)
	local target = nil
	if _G.SDK and _G.SDK.Orbwalker then
		target = _G.SDK.TargetSelector:GetTarget(range)
	else
		target = GOS:GetTarget(range)
	end
	return target
end]]

local function GetMode()
	if _G.SDK and _G.SDK.Orbwalker then
		if _G.SDK.Orbwalker.Modes[_G.SDK.ORBWALKER_MODE_COMBO] then
			return "Combo"
		elseif _G.SDK.Orbwalker.Modes[_G.SDK.ORBWALKER_MODE_HARASS] then
			return "Harass"	
		elseif _G.SDK.Orbwalker.Modes[_G.SDK.ORBWALKER_MODE_LANECLEAR] or _G.SDK.Orbwalker.Modes[_G.SDK.ORBWALKER_MODE_JUNGLECLEAR] then
			return "Clear"
		elseif _G.SDK.Orbwalker.Modes[_G.SDK.ORBWALKER_MODE_LASTHIT] then
			return "Lasthit"
		elseif _G.SDK.Orbwalker.Modes[_G.SDK.ORBWALKER_MODE_FLEE] then
			return "Flee"
		end
	else
		return GOS.GetMode()
	end
end

function HeroesAround(pos, range, team)
	local Count = 0
	for i = 1, Game.HeroCount() do
		local minion = Game.Hero(i)
		if minion and minion.team == team and not minion.dead and pos:DistanceTo(minion.pos) <= range then
			Count = Count + 1
		end
	end
	return Count
end

function MinionsAround(pos, range, team)
	local Count = 0
	for i = 1, Game.MinionCount() do
		local minion = Game.Minion(i)
		if minion and minion.team == team and not minion.dead and pos:DistanceTo(minion.pos) <= range then
			Count = Count + 1
		end
	end
	return Count
end

local HKITEM = {
	[ITEM_1] = HK_ITEM_1,
	[ITEM_2] = HK_ITEM_2,
	[ITEM_3] = HK_ITEM_3,
	[ITEM_4] = HK_ITEM_4,
	[ITEM_5] = HK_ITEM_5,
	[ITEM_6] = HK_ITEM_6,
	[ITEM_7] = HK_ITEM_7,
}


local function Qdmg(target)  --35 / 55 / 75 / 95 / 115 (+ 110% AD) (+ 40% AP)
    local level = myHero:GetSpellData(_Q).level
	if Ready(_Q) then
    	return CalcMagicalDamage(myHero, target, (15 + 20 * level + 0.40 * myHero.ap + 1.10 * myHero.totalDamage))
	end
	return 0
end

local function Wdmg(target)  --70 / 115 / 160 / 205 / 250 (+ 80% AP)
    local level = myHero:GetSpellData(_W).level
	if Ready(_W) then
    	return CalcMagicalDamage(myHero, target, (30 + 45 * level + 0.8 * myHero.ap))
	end
	return 0
end

local function Edmg(target)   --75 / 125 / 175 / 225 / 275 (+ 50% bonus AD) (+ 75% AP)
    local level = myHero:GetSpellData(_E).level
	if Ready(_E) then
        return CalcMagicalDamage(myHero, target, (25 + 50 * level + 0.75 * myHero.ap + 0.50 * myHero.bonusDamage))
	end
	return 0
end

local function Rdmg(target)  --min dmg 105 / 150 / 195 (+ 30% bonus AD) (+ 27% AP)    max 350 / 500 / 650 (+ 100% bonus AD) (+ 90% AP) 
    local level = myHero:GetSpellData(_R).level
	if Ready(_R) then
    	return CalcMagicalDamage(myHero, target, (200 + 150 * level + 0.5 * myHero.ap + 0.60 * myHero.bonusDamage))
	end
	return 0
end

local function Idmg(target)
	if (myHero:GetSpellData(SUMMONER_1).name == "SummonerDot" and Ready(SUMMONER_1))
	or (myHero:GetSpellData(SUMMONER_2).name == "SummonerDot" and Ready(SUMMONER_2)) then
		return 50 + 20 * myHero.levelData.lvl
	end
	return 0
end

local function BSdmg(target)
	if (myHero:GetSpellData(SUMMONER_1).name == "S5_SummonerSmiteDuel" and Ready(SUMMONER_1))
	or (myHero:GetSpellData(SUMMONER_2).name == "S5_SummonerSmiteDuel" and Ready(SUMMONER_2)) then
		return 20 + 8 * myHero.levelData.lvl
	end
	return 0
end

local function RSdmg(target)
	if (myHero:GetSpellData(SUMMONER_1).name == "S5_SummonerSmitePlayerGanker" and Ready(SUMMONER_1))
	or (myHero:GetSpellData(SUMMONER_2).name == "S5_SummonerSmitePlayerGanker" and Ready(SUMMONER_2)) then
		return 54 + 6 * myHero.levelData.lvl
	end
	return 0
end

local function NoPotion()
	for i = 0, 63 do 
	local buff = myHero:GetBuff(i)
		if buff.type == 13 and Game.Timer() < buff.expireTime then 
			return false
		end
	end
	return true
end

local function GetDistanceSqr(p1, p2)
    local dx = p1.x - p2.x
    local dz = p1.z - p2.z
    return (dx * dx + dz * dz)
end

local function GetDistance(p1, p2)
    return sqrt(GetDistanceSqr(p1, p2))
end

local function GetDistance2D(p1,p2)
    return sqrt((p2.x - p1.x)*(p2.x - p1.x) + (p2.y - p1.y)*(p2.y - p1.y))
end

local function ClosestToMouse(p1, p2) 
	if GetDistance(mousePos, p1) > GetDistance(mousePos, p2) then return p2 else return p1 end
end

local function CircleCircleIntersection(c1, c2, r1, r2) 
	local D = GetDistance(c1, c2)
	if D > r1 + r2 or D <= math.abs(r1 - r2) then return nil end 
	local A = (r1 * r2 - r2 * r1 + D * D) / (2 * D) 
	local H = math.sqrt(r1 * r1 - A * A)
	local Direction = (c2 - c1):Normalized() 
	local PA = c1 + A * Direction 
	local S1 = PA + H * Direction:Perpendicular() 
	local S2 = PA - H * Direction:Perpendicular() 
	return S1, S2 
end


local Ezreal = MenuElement({type = MENU, id = "EzrealTocsin", name = "EzrealTocsin"})

Ezreal:MenuElement({id = "Script", name = "Ezreal by Tocsin", drop = {"v2.6"}, leftIcon = "https://vignette2.wikia.nocookie.net/leagueoflegends/images/e/ec/Ezreal_OriginalLoading.jpg"})
Ezreal:MenuElement({name = " ", drop = {"Champion Settings"}})
Ezreal:MenuElement({type = MENU, id = "C", name = "Combo"})
Ezreal:MenuElement({type = MENU, id = "H", name = "Harass"})
Ezreal:MenuElement({type = MENU, id = "LC", name = "LaneClear"})
Ezreal:MenuElement({type = MENU, id = "JC", name = "JungleClear"})
Ezreal:MenuElement({type = MENU, id = "F", name = "Flee"})
Ezreal:MenuElement({type = MENU, id = "KS", name = "KillSteal"})
Ezreal:MenuElement({name = " ", drop = {"Champion Utility"}})
Ezreal:MenuElement({type = MENU, id = "MM", name = "Mana"})
Ezreal:MenuElement({type = MENU, id = "D", name = "Drawings"})
Ezreal:MenuElement({name = " ", drop = {"Extra Settings"}})
Ezreal:MenuElement({type = MENU, id = "A", name = "Activator"})

Ezreal.C:MenuElement({id = "Q", name = "Q: Mystic Shot", value = true})
Ezreal.C:MenuElement({id = "W", name = "W: Essence Flux", value = true})
Ezreal.C:MenuElement({id = "E", name = "E: Arcane Shift", value = false})
Ezreal.C:MenuElement({id = "R", name = "R: Trueshot Barrage", value = true})

Ezreal.H:MenuElement({id = "Q", name = "Q: Mystic Shot", value = true})
Ezreal.H:MenuElement({id = "W", name = "W: Essence Flux", value = true})
Ezreal.H:MenuElement({id = "E", name = "E: Arcane Shift", value = false})

Ezreal.LC:MenuElement({id = "Q", name = "Q: Mystic Shot", value = true})
Ezreal.LC:MenuElement({id = "E", name = "E: Arcane Shift", value = false})

Ezreal.JC:MenuElement({id = "Q", name = "Q: Mystic Shot", value = true})
Ezreal.JC:MenuElement({id = "E", name = "E: Arcane Shift", value = false})

Ezreal.F:MenuElement({id = "E", name = "E: Arcane Shift", value = true})

Ezreal.KS:MenuElement({id = "Q", name = "Q: Mystic Shot", value = true})
Ezreal.KS:MenuElement({id = "W", name = "W: Essence Flux", value = true})

Ezreal.MM:MenuElement({id = "C", name = "Mana % to Combo", value = 0, min = 0, max = 100})
Ezreal.MM:MenuElement({id = "H", name = "Mana % to Harass", value = 60, min = 0, max = 100})
Ezreal.MM:MenuElement({id = "LC", name = "Mana % to Lane", value = 55, min = 0, max = 100})
Ezreal.MM:MenuElement({id = "JC", name = "Mana % to Jungle", value = 30, min = 0, max = 100})
Ezreal.MM:MenuElement({id = "F", name = "Mana % to Flee", value = 5, min = 0, max = 100})
Ezreal.MM:MenuElement({id = "KS", name = "Mana % to KS", value = 0, min = 0, max = 100})

Ezreal.A:MenuElement({type = MENU, id = "P", name = "Potions"})
Ezreal.A.P:MenuElement({id = "Pot", name = "All Potions", value = true})
Ezreal.A.P:MenuElement({id = "HP", name = "Health % to Potion", value = 60, min = 0, max = 100})
Ezreal.A:MenuElement({type = MENU, id = "I", name = "Items"})
Ezreal.A.I:MenuElement({id = "Botrk", name = "Blade of the Ruined King", value = true})
Ezreal.A:MenuElement({type = MENU, id = "S", name = "Summoner Spells"})

DelayAction(function()
	if myHero:GetSpellData(SUMMONER_1).name == "SummonerSmite" or myHero:GetSpellData(SUMMONER_1).name == "S5_SummonerSmitePlayerGanker" or myHero:GetSpellData(SUMMONER_1).name == "S5_SummonerSmiteDuel"
	or myHero:GetSpellData(SUMMONER_2).name == "SummonerSmite" or myHero:GetSpellData(SUMMONER_2).name == "S5_SummonerSmitePlayerGanker" or myHero:GetSpellData(SUMMONER_1).name == "S5_SummonerSmiteDuel" then
		Ezreal.A.S:MenuElement({id = "Smite", name = "Smite in Combo [?]", value = true, tooltip = "If Combo will kill"})
		Ezreal.A.S:MenuElement({id = "SmiteS", name = "Smite Stacks to Combo", value = 1, min = 1, max = 2})
	end
end, 2)
DelayAction(function()
	if myHero:GetSpellData(SUMMONER_1).name == "SummonerHeal"
	or myHero:GetSpellData(SUMMONER_2).name == "SummonerHeal" then
		Ezreal.A.S:MenuElement({id = "Heal", name = "Auto Heal", value = true})
		Ezreal.A.S:MenuElement({id = "HealHP", name = "Health % to Heal", value = 25, min = 0, max = 100})
	end
end, 2)
DelayAction(function()
	if myHero:GetSpellData(SUMMONER_1).name == "SummonerBarrier"
	or myHero:GetSpellData(SUMMONER_2).name == "SummonerBarrier" then
		Ezreal.A.S:MenuElement({id = "Barrier", name = "Auto Barrier", value = true})
		Ezreal.A.S:MenuElement({id = "BarrierHP", name = "Health % to Barrier", value = 25, min = 0, max = 100})
	end
end, 2)
DelayAction(function()
	if myHero:GetSpellData(SUMMONER_1).name == "SummonerDot"
	or myHero:GetSpellData(SUMMONER_2).name == "SummonerDot" then
		Ezreal.A.S:MenuElement({id = "Ignite", name = "Ignite in Combo", value = true})
	end
end, 2)
DelayAction(function()
	if myHero:GetSpellData(SUMMONER_1).name == "SummonerExhaust"
	or myHero:GetSpellData(SUMMONER_2).name == "SummonerExhaust" then
		Ezreal.A.S:MenuElement({id = "Exh", name = "Exhaust in Combo [?]", value = true, tooltip = "If Combo will kill"})
	end
end, 2)
DelayAction(function()
	if myHero:GetSpellData(SUMMONER_1).name == "SummonerBoost"
	or myHero:GetSpellData(SUMMONER_2).name == "SummonerBoost" then
		Ezreal.A.S:MenuElement({id = "Cleanse", name = "Auto Cleanse", value = true})
		Ezreal.A.S:MenuElement({id = "Blind", name = "Blind", value = false})
		Ezreal.A.S:MenuElement({id = "Charm", name = "Charm", value = true})
		Ezreal.A.S:MenuElement({id = "Flee", name = "Flee", value = true})
		Ezreal.A.S:MenuElement({id = "Slow", name = "Slow", value = false})
		Ezreal.A.S:MenuElement({id = "Root", name = "Root/Snare", value = true})
		Ezreal.A.S:MenuElement({id = "Poly", name = "Polymorph", value = true})
		Ezreal.A.S:MenuElement({id = "Silence", name = "Silence", value = true})
		Ezreal.A.S:MenuElement({id = "Stun", name = "Stun", value = true})
		Ezreal.A.S:MenuElement({id = "Taunt", name = "Taunt", value = true})
	end
end, 2)
Ezreal.A.S:MenuElement({type = SPACE, id = "Note", name = "Note: Ghost/TP/Flash is not supported"})

Ezreal.D:MenuElement({id = "Q", name = "Q: Mystic Shot", value = true})
Ezreal.D:MenuElement({id = "W", name = "W: Essence Flux", value = true})
Ezreal.D:MenuElement({id = "Dmg", name = "Damage HP bar", value = true})

local _OnVision = {}
function OnVision(unit)
	if _OnVision[unit.networkID] == nil then _OnVision[unit.networkID] = {state = unit.visible , tick = GetTickCount(), pos = unit.pos} end
	if _OnVision[unit.networkID].state == true and not unit.visible then _OnVision[unit.networkID].state = false _OnVision[unit.networkID].tick = GetTickCount() end
	if _OnVision[unit.networkID].state == false and unit.visible then _OnVision[unit.networkID].state = true _OnVision[unit.networkID].tick = GetTickCount() end
	return _OnVision[unit.networkID]
end

Callback.Add("Tick", function() OnVisionF() Tick() end)
Callback.Add("Draw", function() Drawings() end)

local visionTick = GetTickCount()
function OnVisionF()
	if GetTickCount() - visionTick > 100 then
		for i,v in pairs(GetEnemyHeroes()) do
			OnVision(v)
		end
	end
end

local _OnWaypoint = {}
function OnWaypoint(unit)
	if _OnWaypoint[unit.networkID] == nil then _OnWaypoint[unit.networkID] = {pos = unit.posTo , speed = unit.ms, time = Game.Timer()} end
	if _OnWaypoint[unit.networkID].pos ~= unit.posTo then 
		_OnWaypoint[unit.networkID] = {startPos = unit.pos, pos = unit.posTo , speed = unit.ms, time = Game.Timer()}
			DelayAction(function()
				local time = (Game.Timer() - _OnWaypoint[unit.networkID].time)
				local speed = GetDistance2D(_OnWaypoint[unit.networkID].startPos,unit.pos)/(Game.Timer() - _OnWaypoint[unit.networkID].time)
				if speed > 1250 and time > 0 and unit.posTo == _OnWaypoint[unit.networkID].pos and GetDistance(unit.pos,_OnWaypoint[unit.networkID].pos) > 200 then
					_OnWaypoint[unit.networkID].speed = GetDistance2D(_OnWaypoint[unit.networkID].startPos,unit.pos)/(Game.Timer() - _OnWaypoint[unit.networkID].time)
				end
			end,0.05)
	end
	return _OnWaypoint[unit.networkID]
end

local function Priority(charName)
	  local p1 = {"Alistar", "Amumu", "Blitzcrank", "Braum", "Cho'Gath", "Dr. Mundo", "Garen", "Gnar", "Maokai", "Hecarim", "Jarvan IV", "Leona", "Lulu", "Malphite", "Nasus", "Nautilus", "Nunu", "Olaf", "Rammus", "Renekton", "Sejuani", "Shen", "Shyvana", "Singed", "Sion", "Skarner", "Taric", "TahmKench", "Thresh", "Volibear", "Warwick", "MonkeyKing", "Yorick", "Zac", "Poppy"}
	  local p2 = {"Aatrox", "Darius", "Elise", "Evelynn", "Galio", "Gragas", "Irelia", "Jax", "Lee Sin", "Morgana", "Janna", "Nocturne", "Pantheon", "Rengar", "Rumble", "Swain", "Trundle", "Tryndamere", "Udyr", "Urgot", "Vi", "XinZhao", "RekSai", "Bard", "Nami", "Sona", "Camille", "Rakan", "Kayn"}
	  local p3 = {"Akali", "Diana", "Ekko", "FiddleSticks", "Fiora", "Gangplank", "Fizz", "Heimerdinger", "Jayce", "Kassadin", "Kayle", "Kha'Zix", "Lissandra", "Mordekaiser", "Nidalee", "Riven", "Shaco", "Vladimir", "Yasuo", "Zilean", "Zyra", "Ryze"}
	  local p4 = {"Ahri", "Anivia", "Annie", "Ashe", "Azir", "Brand", "Caitlyn", "Cassiopeia", "Corki", "Draven", "Ezreal", "Graves", "Jinx", "Kalista", "Karma", "Karthus", "Katarina", "Kennen", "KogMaw", "Kindred", "Leblanc", "Lucian", "Lux", "Malzahar", "MasterYi", "MissFortune", "Orianna", "Quinn", "Sivir", "Syndra", "Talon", "Teemo", "Tristana", "TwistedFate", "Twitch", "Varus", "Vayne", "Veigar", "Velkoz", "Viktor", "Xerath", "Zed", "Ziggs", "Jhin", "Soraka", "Xayah"}
	  if table.contains(p1, charName) then return 1 end
	  if table.contains(p2, charName) then return 1.25 end
	  if table.contains(p3, charName) then return 1.75 end
	  return table.contains(p4, charName) and 2.25 or 1
	end
	
	local function GetTarget(range,t,pos)
	local t = t or "AD"
	local pos = pos or myHero.pos
	local target = {}
		for i = 1, Game.HeroCount() do
			local hero = Game.Hero(i)
			if hero.team == TEAM_ENEMY and hero.dead == false then
				OnVision(hero)
			end
			if hero.team == TEAM_ENEMY and hero.valid and hero.dead == false and (OnVision(hero).state == true or (OnVision(hero).state == false and GetTickCount() - OnVision(hero).tick < 650)) and hero.isTargetable then
				local heroPos = hero.pos
				if OnVision(hero).state == false then heroPos = hero.pos + Vector(hero.pos,hero.posTo):Normalized() * ((GetTickCount() - OnVision(hero).tick)/1000 * hero.ms) end
				if GetDistance(pos,heroPos) <= range then
					if t == "AD" then
						target[(CalcPhysicalDamage(myHero,hero,100) / hero.health)*Priority(hero.charName)] = hero
					elseif t == "AP" then
						target[(CalcMagicalDamage(myHero,hero,100) / hero.health)*Priority(hero.charName)] = hero
					elseif t == "HYB" then
						target[((CalcMagicalDamage(myHero,hero,50) + CalcPhysicalDamage(myHero,hero,50))/ hero.health)*Priority(hero.charName)] = hero
					end
				end
			end
		end
		local bT = 0
		for d,v in pairs(target) do
			if d > bT then
				bT = d
			end
		end
		if bT ~= 0 then return target[bT] end
	end	

	local function GetPred(unit,speed,delay) 
		local speed = speed or math.huge
		local delay = delay or 0.25
		local unitSpeed = unit.ms
		if OnWaypoint(unit).speed > unitSpeed then unitSpeed = OnWaypoint(unit).speed end
		if OnVision(unit).state == false then
			local unitPos = unit.pos + Vector(unit.pos,unit.posTo):Normalized() * ((GetTickCount() - OnVision(unit).tick)/1000 * unitSpeed)
			local predPos = unitPos + Vector(unit.pos,unit.posTo):Normalized() * (unitSpeed * (delay + (GetDistance(myHero.pos,unitPos)/speed)))
			if GetDistance(unit.pos,predPos) > GetDistance(unit.pos,unit.posTo) then predPos = unit.posTo end
			return predPos
		else
			if unitSpeed > unit.ms then
				local predPos = unit.pos + Vector(OnWaypoint(unit).startPos,unit.posTo):Normalized() * (unitSpeed * (delay + (GetDistance(myHero.pos,unit.pos)/speed)))
				if GetDistance(unit.pos,predPos) > GetDistance(unit.pos,unit.posTo) then predPos = unit.posTo end
				return predPos
			elseif IsImmobileTarget(unit) then
				return unit.pos
			else
				return unit:GetPrediction(speed,delay)
			end
		end	
	end	

local castSpell = {state = 0, tick = GetTickCount(), casting = GetTickCount() - 1000, mouse = mousePos}

local function CustomCast(spell, pos, delay)
	if pos == nil then return end
	if _G.EOWLoaded or _G.SDK then
		Control.CastSpell(spell, pos)
	elseif _G.GOS then
		local ticker = GetTickCount()
		if castSpell.state == 0 and ticker - castSpell.casting > delay + Game.Latency() and pos:ToScreen().onScreen then
			castSpell.state = 1
			castSpell.mouse = mousePos
			castSpell.tick = ticker
		end
		if castSpell.state == 1 then
			if ticker - castSpell.tick < Game.Latency() then
				Control.SetCursorPos(pos)
				Control.KeyDown(spell)
				Control.KeyUp(spell)
				castSpell.casting = ticker + delay
				DelayAction(function()
					if castSpell.state == 1 then
						Control.SetCursorPos(castSpell.mouse)
						castSpell.state = 0
					end
				end, Game.Latency()/1000)
			end
			if ticker - castSpell.casting > Game.Latency() then
				Control.SetCursorPos(castSpell.mouse)
				castSpell.state = 0
			end
		end
	end
end

function Tick()
	if myHero.dead or Game.IsChatOpen() == true then return end
    local Mode = GetMode()
	if Mode == "Combo" then
		Combo()
	elseif Mode == "Clear" then
		Lane()
        Jungle()
	elseif Mode == "Harass" then
		Harass()
    elseif Mode == "Flee" then
        Flee()
	end
		Killsteal()
        Summoners()
        Activator()
end

function Combo()
    if Ezreal.MM.C:Value() > PercentMP(myHero) then return end
    local target = GetTarget(1100)
    if target == nil or target == myHero.team then return end
    if Ready(_Q) and ValidTarget(target, 1000) and myHero.pos:DistanceTo(target.pos) < 1000 then
        if Ezreal.C.Q:Value() and target:GetCollision(Q.Width, Q.Speed, Q.Delay) == 0 then
            local pos = GetPred(target, Q.Speed, 0.25 + (Game.Latency()/1000))
			EnableOrb(false)
			CustomCast(HK_Q, pos, 250)
			DelayAction(function() EnableOrb(true) end, 0.3)
        end
    end
	if Ready(_W) and ValidTarget(target, 900) then
        if Ezreal.C.W:Value() and myHero.pos:DistanceTo(target.pos) < 850 then
            local pos = GetPred(target, W.Speed, 0.25 + (Game.Latency()/1000))
			EnableOrb(false)
			CustomCast(HK_W, pos, 250)
			DelayAction(function() EnableOrb(true) end, 0.3)
        end
    end
	if Ready(_E) and ValidTarget(target, E.Range) then
        if Ezreal.C.E:Value() then
            local pos = GetPred(target, E.Speed, 0.25 + (Game.Latency()/1000))
			Control.CastSpell(HK_E)
        end
    end
    if Ready(_R) and ValidTarget(target, R.Range) and Rdmg(target) > target.health then
        if Ezreal.C.R:Value() and myHero.pos:DistanceTo(target.pos) > 700 then
            local pos = GetPred(target, R.Speed, 1.00 + (Game.Latency()/1000))
			EnableOrb(false)
			CustomCast(HK_R, pos, 1000)
			DelayAction(function() EnableOrb(true) end, 1.02)
        end
    end
end

function Lane()
    for i = 1, Game.MinionCount() do
        local minion = Game.Minion(i)
        if minion and minion.team ~= myHero.team then
            if Ready(_Q) and ValidTarget(minion, 1100) then
                if Ezreal.MM.LC:Value() > PercentMP(myHero) then return end
                if Ezreal.LC.Q:Value() then
                    local pos = GetPred(minion, Q.Speed, 0.25 + (Game.Latency()/1000))
					EnableOrb(false)
					CustomCast(HK_Q, pos, 250)
					DelayAction(function() EnableOrb(true) end, 0.3)
                end
            end
        end
    end
    for i = 1, Game.MinionCount() do
        local minion = Game.Minion(i)
        if minion and minion.team ~= myHero.team then  
            if Ready(_E) and ValidTarget(minion, E.Range) then
                if Ezreal.MM.LC:Value() > PercentMP(myHero) then return end
                    if Ezreal.LC.E:Value() then
                        Control.CastSpell(HK_E)  
                    end
            end
        end
    end
end

function Jungle()
    if Ezreal.MM.JC:Value() > PercentMP(myHero) then return end
    for i = 1, Game.MinionCount() do
		local minion = Game.Minion(i)
        if minion and minion.team == 300 then
            if Ready(_Q) and ValidTarget(minion, 1100) then
                if Ezreal.JC.Q:Value() then
                    local pos = GetPred(minion, Q.Speed, 0.25 + (Game.Latency()/1000))
					EnableOrb(false)
					Control.CastSpell(HK_Q, minion.pos)
					--CustomCast(HK_Q, pos, 250)
					DelayAction(function() EnableOrb(true) end, 0.3)
                end
            end
            if Ready(_E) and ValidTarget(minion, E.Range) then
                if Ezreal.JC.E:Value() then
                    Control.CastSpell(HK_E, minion.pos)
                end
            end
        end
    end
end

function Harass()
    if Ezreal.MM.H:Value() > PercentMP(myHero) then return end
    local target = GetTarget(1000)
    if target == nil or target == myHero.team then return end  
	if Ready(_Q) and ValidTarget(target, 1000) and myHero.pos:DistanceTo(target.pos) < 1000 then
		if myHero.pos:DistanceTo(target.pos) > 1050 then return end
        if Ezreal.H.Q:Value() and target:GetCollision(Q.Width, Q.Speed, Q.Delay) == 0 then
            local pos = GetPred(target, Q.Speed, 0.25 + (Game.Latency()/1000))
			EnableOrb(false)
			CustomCast(HK_Q, pos, 250)
			DelayAction(function() EnableOrb(true) end, 0.3)
        end
    end
    if Ready(_W) and ValidTarget(target, 880) then
    	if myHero.pos:DistanceTo(target.pos) > 880 then return end
        if Ezreal.H.W:Value() then
            local pos = GetPred(target, W.Speed, 0.25 + (Game.Latency()/1000))
			EnableOrb(false)
			CustomCast(HK_W, pos, 250)
			DelayAction(function() EnableOrb(true) end, 0.3)
        end
    end
    if Ready(_E) and ValidTarget(target, E.Range) then
        if Ezreal.H.E:Value() then
            local pos = GetPred(target, E.Speed, 0.25 + (Game.Latency()/1000))
			Control.CastSpell(HK_E)
        end
    end
end

function Flee()
    if Ezreal.MM.F:Value() > PercentMP(myHero) then return end
    local target = GetTarget(E.Range)
    if target == nil then return end
    if Ready(_E) then
        if Ezreal.F.E:Value() then
            local pos = GetPred(target, E.Speed, 0.25 + (Game.Latency()/1000))
			Control.CastSpell(HK_E)
        end
    end
end

function Killsteal()
    if Ezreal.MM.KS:Value() > PercentMP(myHero) then return end
    local target = GetTarget(Q.Range)
    if target == nil or target == myHero.team or myHero.pos:DistanceTo(target.pos) > 1040 then return end
	if Ready(_Q) and ValidTarget(target, Q.Range) then
        if Ezreal.KS.Q:Value() and Qdmg(target) > target.health then
            local pos = GetPred(target, Q.Speed, 0.25 + (Game.Latency()/1000))
			EnableOrb(false)
			CustomCast(HK_Q, pos, 250)
			DelayAction(function() EnableOrb(true) end, 0.3)
        end
    end
    if Ready(_W) and ValidTarget(target, W.Range) then
        if Ezreal.KS.W:Value() and Wdmg(target) > target.health then
            local pos = GetPred(target, W.Speed, 0.25 + (Game.Latency()/1000))
			EnableOrb(false)
			CustomCast(HK_W, pos, 250)
			DelayAction(function() EnableOrb(true) end, 0.3)
        end
    end
end

function Summoners()
	local target = GetTarget(600)
    if target == nil or target == myHero.team then return end
	if GetMode() == "Combo" then
		if myHero:GetSpellData(SUMMONER_1).name == "SummonerSmite" or myHero:GetSpellData(SUMMONER_1).name == "S5_SummonerSmitePlayerGanker" or myHero:GetSpellData(SUMMONER_1).name == "S5_SummonerSmiteDuel"
		or myHero:GetSpellData(SUMMONER_2).name == "SummonerSmite" or myHero:GetSpellData(SUMMONER_2).name == "S5_SummonerSmitePlayerGanker" or myHero:GetSpellData(SUMMONER_1).name == "S5_SummonerSmiteDuel" then
			if Ezreal.A.S.Smite:Value() then
				local RedDamage = Qdmg(target) + Edmg(target) + RSdmg(target)
				if myHero:GetSpellData(SUMMONER_1).name == "S5_SummonerSmiteDuel" and Ready(SUMMONER_1) and RedDamage > target.health
				and myHero:GetSpellData(SUMMONER_1).ammo >= Ezreal.A.S.SmiteS:Value() and myHero.pos:DistanceTo(target.pos) < 500 then
					Control.CastSpell(HK_SUMMONER_1, target)
				elseif myHero:GetSpellData(SUMMONER_2).name == "S5_SummonerSmiteDuel" and Ready(SUMMONER_2) and RedDamage > target.health
				and myHero:GetSpellData(SUMMONER_2).ammo >= Ezreal.A.S.SmiteS:Value() and myHero.pos:DistanceTo(target.pos) < 500 then
					Control.CastSpell(HK_SUMMONER_2, target)
				end
				local BlueDamage = Qdmg(target) + Wdmg(target) + BSdmg(target)
				if myHero:GetSpellData(SUMMONER_1).name == "S5_SummonerSmitePlayerGanker" and Ready(SUMMONER_1) and BlueDamage > target.health
				and myHero:GetSpellData(SUMMONER_1).ammo >= Ezreal.A.S.SmiteS:Value() and myHero.pos:DistanceTo(target.pos) < 500 then
					Control.CastSpell(HK_SUMMONER_1, target)
				elseif myHero:GetSpellData(SUMMONER_2).name == "S5_SummonerSmitePlayerGanker" and Ready(SUMMONER_2) and BlueDamage > target.health
				and myHero:GetSpellData(SUMMONER_2).ammo >= Ezreal.A.S.SmiteS:Value() and myHero.pos:DistanceTo(target.pos) < 500 then
					Control.CastSpell(HK_SUMMONER_2, target)
				end
			end
		end
		if myHero:GetSpellData(SUMMONER_1).name == "SummonerDot"
		or myHero:GetSpellData(SUMMONER_2).name == "SummonerDot" then
			if Ezreal.A.S.Ignite:Value() then
				local IgDamage = Qdmg(target) + Edmg(target) + Idmg(target)
				if myHero:GetSpellData(SUMMONER_1).name == "SummonerDot" and Ready(SUMMONER_1) and IgDamage > target.health
				and myHero.pos:DistanceTo(target.pos) < 600 then
					Control.CastSpell(HK_SUMMONER_1, target)
				elseif myHero:GetSpellData(SUMMONER_2).name == "SummonerDot" and Ready(SUMMONER_1) and IgDamage > target.health
				and myHero.pos:DistanceTo(target.pos) < 600 then
					Control.CastSpell(HK_SUMMONER_2, target)
				end
			end
		end
		if myHero:GetSpellData(SUMMONER_1).name == "SummonerExhaust"
		or myHero:GetSpellData(SUMMONER_2).name == "SummonerExhaust" then
			if Ezreal.A.S.Exh:Value() then
				local Damage = Qdmg(target) + Edmg(target)
				if myHero:GetSpellData(SUMMONER_1).name == "SummonerExhaust" and Ready(SUMMONER_1) and Damage > target.health
				and myHero.pos:DistanceTo(target.pos) < 650 then
					Control.CastSpell(HK_SUMMONER_1, target)
				elseif myHero:GetSpellData(SUMMONER_2).name == "SummonerExhaust" and Ready(SUMMONER_1) and Damage > target.health
				and myHero.pos:DistanceTo(target.pos) < 650 then
					Control.CastSpell(HK_SUMMONER_2, target)
				end
			end
		end
	end
	if myHero:GetSpellData(SUMMONER_1).name == "SummonerHeal"
	or myHero:GetSpellData(SUMMONER_2).name == "SummonerHeal" then
		if Ezreal.A.S.Heal:Value() then
			if myHero:GetSpellData(SUMMONER_1).name == "SummonerHeal" and Ready(SUMMONER_1) and PercentHP(myHero) < Ezreal.A.S.HealHP:Value() then
				Control.CastSpell(HK_SUMMONER_1)
			elseif myHero:GetSpellData(SUMMONER_2).name == "SummonerHeal" and Ready(SUMMONER_1) and PercentHP(myHero) < Ezreal.A.S.HealHP:Value() then
				Control.CastSpell(HK_SUMMONER_2)
			end
		end
	end
	if myHero:GetSpellData(SUMMONER_1).name == "SummonerBarrier"
	or myHero:GetSpellData(SUMMONER_2).name == "SummonerBarrier" then
		if Ezreal.A.S.Barrier:Value() then
			if myHero:GetSpellData(SUMMONER_1).name == "SummonerBarrier" and Ready(SUMMONER_1) and PercentHP(myHero) < Ezreal.A.S.BarrierHP:Value() then
				Control.CastSpell(HK_SUMMONER_1)
			elseif myHero:GetSpellData(SUMMONER_2).name == "SummonerBarrier" and Ready(SUMMONER_1) and PercentHP(myHero) < Ezreal.A.S.BarrierHP:Value() then
				Control.CastSpell(HK_SUMMONER_2)
			end
		end
	end
	if myHero:GetSpellData(SUMMONER_1).name == "SummonerBoost"
	or myHero:GetSpellData(SUMMONER_2).name == "SummonerBoost" then
		if Ezreal.A.S.Cleanse:Value() then
			for i = 0, myHero.buffCount do
			local buff = myHero:GetBuff(i);
				if buff.count > 0 then
					if ((buff.type == 5 and Ezreal.A.S.Stun:Value())
					or (buff.type == 7 and  Ezreal.A.S.Silence:Value())
					or (buff.type == 8 and  Ezreal.A.S.Taunt:Value())
					or (buff.type == 9 and  Ezreal.A.S.Poly:Value())
					or (buff.type == 10 and  Ezreal.A.S.Slow:Value())
					or (buff.type == 11 and  Ezreal.A.S.Root:Value())
					or (buff.type == 21 and  Ezreal.A.S.Flee:Value())
					or (buff.type == 22 and  Ezreal.A.S.Charm:Value())
					or (buff.type == 25 and  Ezreal.A.S.Blind:Value())
					or (buff.type == 28 and  Ezreal.A.S.Flee:Value())) then
						if myHero:GetSpellData(SUMMONER_1).name == "SummonerBoost" and Ready(SUMMONER_1) then
							Control.CastSpell(HK_SUMMONER_1)
						elseif myHero:GetSpellData(SUMMONER_2).name == "SummonerBoost" and Ready(SUMMONER_2) then
							Control.CastSpell(HK_SUMMONER_2)
						end
					end
				end
			end
		end
	end
end

function Activator()
	local target = GetTarget(800)
    if target == nil or target == myHero.team then return end
	local items = {}
	for slot = ITEM_1,ITEM_6 do
		local id = myHero:GetItemData(slot).itemID 
		if id > 0 then
			items[id] = slot
		end
	end

	local Potion = items[2003] or items[2010] or items[2031] or items[2032] or items[2033]
	if Potion and myHero:GetSpellData(Potion).currentCd == 0 and Ezreal.A.P.Pot:Value() and PercentHP(myHero) < Ezreal.A.P.HP:Value() and NoPotion() then
		Control.CastSpell(HKITEM[Potion])
	end

	if GetMode() == "Combo" then
		local Botrk = items[3153] or items[3144]
		if Botrk and myHero:GetSpellData(Botrk).currentCd == 0 and Ezreal.A.I.Botrk:Value() and myHero.pos:DistanceTo(target.pos) < 550 then
			Control.CastSpell(HKITEM[Botrk], target.pos)
		end
	end
end

function Drawings()
    if myHero.dead then return end
	if Ezreal.D.Q:Value() and Ready(_Q) then Draw.Circle(myHero.pos, 1050, 3,  Draw.Color(255, 000, 222, 255)) end
    if Ezreal.D.W:Value() and Ready(_W) then Draw.Circle(myHero.pos, 900, 3,  Draw.Color(255, 255, 200, 000)) end
	
	if Ezreal.D.Dmg:Value() then
		for i = 1, Game.HeroCount() do
			local enemy = Game.Hero(i)
			if enemy and enemy.isEnemy and not enemy.dead and enemy.visible then
				local barPos = enemy.hpBar
				local health = enemy.health
				local maxHealth = enemy.maxHealth
				local Qdmg = Qdmg(enemy)
				local Wdmg = Wdmg(enemy)
				local Edmg = Edmg(enemy)
				local Rdmg = Rdmg(enemy)
				local Damage = Qdmg + Wdmg + Edmg + Rdmg
				if Damage < health then
					Draw.Rect(barPos.x + (((health - Qdmg) / maxHealth) * 100), barPos.y, (Qdmg / maxHealth )*100, 10, Draw.Color(170, 000, 222, 255))
					Draw.Rect(barPos.x + (((health - (Qdmg + Wdmg)) / maxHealth) * 100), barPos.y, (Wdmg / maxHealth )*100, 10, Draw.Color(170, 255, 200, 000))
					Draw.Rect(barPos.x + (((health - (Qdmg + Wdmg + Edmg)) / maxHealth) * 100), barPos.y, (Edmg / maxHealth )*100, 10, Draw.Color(170, 246, 000, 255))
					Draw.Rect(barPos.x + (((health - (Qdmg + Wdmg + Edmg + Rdmg)) / maxHealth) * 100), barPos.y, (Rdmg / maxHealth )*100, 10, Draw.Color(170, 000, 043, 255))
				else
    				Draw.Rect(barPos.x, barPos.y, (health / maxHealth ) * 100, 10, Draw.Color(170, 000, 255, 000))
				end
			end
		end
	end
end