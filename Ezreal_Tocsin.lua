--.                                                                       xUXc                                                                          
--                                                                         ;s2c.       :                                                                
--.                                                              ;.         ,ssUtc;    rB2                                                              
--                                                               ,#@Hc;,      csZUcT:  ,S6g                                                             
--.                                                                t@B@BD2r    C;iLjTt..ssSF   .                                                        
--                                                                  ;@BbbHDgr   U:cFcc0FrjsPF  .       ...                                              
--                                                                   rUnSPng@tr ri:7T;CUr7LSn:   .rtnsOnSxxstSntncr:                                    
--                                                .rtXZXF2xStj7r:,    rsCU27Fdntrc:;rriTrs5ssrTs5Fr;:;rrr;;;;:,:;rr506t:                                
--                                            ,cgXZs7:.     ..::;ricT;rr5US5rrO0jr:.;rrx7L5TiF0r.;c5OCjjsccrjstcirir;;rLZ;                              
--                                         ;tCi;.  .:rit5nCFS5jr;:.,,cgSrxgins;tZs;..r7s;s5nPL  g@Sr;,..       ..;rTCnc: r0;                            
--                                      ,SUi.  ;jF6ggOX5Lrr;rrrrccCc:  ;XsLX;Lcrsnxr,.rL;7CB; .bB;,.:::,,....       .;LXU  0r                           
--                                     Zb;  ;O8B0Cr;;,.      . ..,:s2;   Z;rC;crrxOt;,:5irZS .7@,,::,,,.,... .       ..;Xn  8,                          
--                                   c@7  rd8Fi;:,,.. ..,..         xL.  TO:ixiL;rLnr;rrr;B8.,rPr.                    . rn: Ct                          
--                                 ,F@;  sdn;, ..,,,.              ;;,.  dPrxTLxc7r57rU;.;B@L. ,iTi.                    ri. Zr                          
--                                tFdj .;UX;.   ..,             ,;:    .cB; ;cZji,;;5rci;r@:;gT   ;rr;               .:;; .,H;                          
--                              x0c 5c.;::;;;;;;:;.... . . .        ;r;rbB, .rj2n0Pd@DXC7g; rC@@X;    .,:r7r;.  .,;rc7;. .:,isO.                        
--                           ,SPc..:5Xjr;...,,,.,,...           .;r;, .#bini.j@#PCi;;;;. s;jHtTcFb#xc.  ;. ,:;i         rc :r5St                        
--                         rFi   rtXiLOO5tciiT;,........:;:Lci5x7;   xBd;;0x:CP,     .   ; cX2ZP5rrTi;c0  ..;  L;,,;rcSO87;r2@Xg                        
--                            .;cOdx,:LXdXZSFSXZnCCcirr;;;UL     .rrPXr:r50nr7i .;LCOSXt;r ;x:rTxxFxc:Sc gi ;2 x;  ;7tC;r7,FcscX                        
--                          :srCHX0i  ,,rg;;r;;rr;;r;;,..s. ;i;.  ,t;..cO2Zx;rsgB@Bdn5L088rsSrrir;:;;rZ2;Zr;jg.ZrrcTLcir,FnSct5;                        
--                         tUi2PtZB;  i. scrr;;;;rrrrr;,;i .XrrsC; .rrEBBB@B8B@B#06ZFjr,TOPFT;;rTir;;:iLr;CUXrrL,        .rs5s;.;;,                     
--                       ;Ctjt7t8D6C .75 tF7cLTsTLjirr;r;STTBj;;nL;ssr5sijsZFPEPjcF2XPCiiitO#Frr;rj2r;.,ii:;r5T;rr;rrrrr;;;is@Br.. :,.                  
--                     ,rscTi;OB8SgU7gXLgxr;7rrrrrr;::::;rUcxZssU;jUgFts5xStCsxCUCSC200istLL8B@SSb@bL;cr;:;iscj7j7rrCL:,:;riTs@BPi,                     
--                   ,irc6Xi;n86ZsZ0bUrLsr;rrcTsLLTsLsccir;ri7rr;xDxUBHDd6EgXH6ZCUF0Oc#FrFTTSBnXbB6D00#BgUUP0OCStxS02iE0O5COxji2B86#L.                  
--                 ;tT:;FgTrUggFSrFDPc;.csc,    ,.,,:,,.   ,Lsss5cr;;;;:, .,;TL5CcXZtxg67C6UnciLcrisOB@B6OF5i;;;r760s;5XOjcsXtcscg@b0sLcr;.             
--              :jji:  ZdirtxxxSjLF#SccrS@b8PgFc;;...:,;;;:.,;cEUCrrctrr:       .;iDSc5n0#Tcc;;;;cLSEs:.,;.. .;5d@BH0Z5Usj;rsnCs5ntEE:   ;;:..          
--           :r;,     tBjTSCtt#tStZ#sT7;0BFCZ6BB@B@BgSSCsiSEPPXT5sgExrrrt#@dXxr    .CPiX@tsr;:rcr;;:  .;ssriUHDZ2Cs5SUZtLcjcLcjijr7jn8U,                
--         .         rB2cg2Cc@6ScF8Etg;:SZcCS68B@@B#H6scrUB0CLjiCCr;;CLrXgn6d8B@n:   rb@gi  .::;;Cc7;cSCtsr;;it2ss;.,;:;;;;r;;;ir7LtsjC8S;              
--                  .@Fr8cr50BD7C0HgZ6Tj68dP0X6#dP#8@Ennni;rrrcTTrriS5xZFtSStrsg8B8;  FB#  rrir2OjXnHB@Xr:r;;;r;7g85..rsdB@B@D2sLrTctt550POc:           
--           :.     E676r;igX@jt8UgBC5C6XCjLsxZdDb#@crccrrcFx5cUjicrcXZTjLTLrrt5sBB@B.r@;,#biT;;;;r5rrx@B@HHFr;7r;i@#E0gP6OOnPb8#OjTcsxFnXPdHFc;        
--           ,PB@B6dSsOsrs62dSrcirrcrrrrcc2OUnEZ0D@0xFX5ZEDXtiT;rL;:ns:;r;;.:rrjBB@@@BBBtB@cHjr:;;rc77.;i8@rcgUirr;rB2:;r;;;;;rcSO#0SscTLsCt5LsSZT;     
--              ;CE025r;;j2UsstsTjsscccjxSLOPnxZD#XDEd808P;.:;,;;  ;:  .    r:r2B@DBB@@@B@B;r8;r;:r;:i;rrr6b,.;nDC;:rBL;;irr;;:;;;;cjtcj55Tjc7rristF5Tr 
--               ,FSriLTsri7rrr;;;;;;;ic7igFirCXtL#O0HiTx, .,              :;,sx;.,:;rU@@B@s;gtr;.;.: 7;trCBF,;.PBH;,iPrr;rrir;;:,,,;;;7sLsj5LLir:.     
--             .jHgjcjTXS5FjrrrrrrrTsUZsC#r,t2sssgOFt;.r         .      . ,r,rZr,;;;:,.;:;Xi;rd,...   ;;srjHU,;trr##t,siisc7rrrcrr;r;rrr;;;7rr;ricii;:  
--          :;iXHZ7rTLUU6Ziricicc2Ot68HX8;;F5icgDBsr; .         ..   .r ;;ri;tn,:;;;:::.. c; ;@  .    . s;rTx.rPt,LSHjLr  .   ,:;;rrr;;,....,;rr;.      
--     .:rir;rcrLLrc7icCLTCFndHZxFXdxcx6s.rr7L8DBxr  .   .    .. ...:Tc:rcstrC; ,;:,.:,, ,t. L2 ;.,.    j;;rc:5Sr5;CEFOZ7S5r;, ,       .:;;:.           
--;;P6dXj;;rr;;rLrirr;;r;rsCtTcsCFZcr;sH;.:c7gXxS;  .:. .;,.;,, .::r, gTxr;255:   .   .  ir  B;:;:;.. ,.t;;j;;OTrcxr7Xjxsd@b08DxxEB@@#L:.               
--      ,ri7;,;:;;:;;rrsSSiirisxjj:,;LBs,;x;TOsX;.  ;:. :;;;rrrrcrr:  2gT  ZxL          ;jr.Z@.r;;;;,;,:L;ri jT7trCFrr0LrcTjr;r;;sHSH@BbS7;:.           
--    .rr:,   .,rc55O5sUFisCn5ssFsxn8Bgr;xrrTsLL . :;;  ;rF rtT:Ojr   ;#r  iLi          c;rU@,7c:;r:;;rt;Ts:rdxisjin2,iZ,csTLLr;rrtT;jCxFjsir;ric;;,    
--  7CLLr;;;rLt2xcir;rii;cCH6HB@bPb@BX;;crr5jjt:.,,;;, ;rF; sF. Es     Bc  ,Xi         i;Tit;rtr:;.r;;7c;nrsb@B6i;iLs7 Cr;5rTFtirLrC:;ist2Tx2xLr;.      
--XsP6XnFSU2Z2s7r;rrisUZPEZFxCS;,iDBP: ;;:jSciU:,,::;: ;jS  xc  D:     rt   Z5        ;i0;.rcc;:;:rLrrciiriB@#88@c .sO;;n;Sccj2srijLn;rr;:;:,           
--SsOO2t52sTr;:;;rFHgg2Cr;;rcLr;c8DL, ;;,ctcrCU:.T;rrr ;g   r. ,S       L   rO       iCS. cCr;, ;7;;srxrrXB@EcXXt@s  UC,ccrC7Urn;c57bi                  
--    ......;rrrEdsrrrcrriF2s7;r#Es. , ;CU;irTF ;xrcc, xDXDxPSrsO:,   . ;.   E:    :T;:  F2r;: ,c. irrtr#B08cjLCic@5  2rrT;T7C;i;:S;gP7.                
--       ..;:,. ...:rircccii;,,2UL: ;.:xE,rcrjC.rT;Lr  Xi56XObt2ZUS2Tr,. ... rx   .,   ,ssr;. .s;;c#Z#gPCnCg;Lr7Lr;@0 ;c;rrr7cc:c.jc5OS;,               
--Et5tZc;::;;;;;rcTrrr;,..;;  UBS, ::.LC ;si;ZT.ir;L;:r#8B@BDPOBD2ZC2FPSr..,: ,       ;rr;, ,r8OcrxinUg2OB@Drxr77i;i@t r.::,7i2 r,;LcTxX...             
--cc5CFScTiccircr7rr,  .;7;,,OBg, ;; rL ;Fir;dr:r;rxr2iDsr8x,CnxB..Cn5rsF6t;,;::,;:;;:,;:.;t2t;rcdDSxHd; ;rLrSr7,ti;s@: .::.;ri;;; irc;PZ. ,            
--    .:;;rr: ;;;;. ,;csi;:;UBc  rr ii ;Scs,rXrrr:jrrS5s  @r s#c6  . ;Lc;rLFFrir;;;;;;:;sSjr;rOOEBL;8BUs,  rcSi;,Tr;cs@   ;.;;c;r7,:rLrc0#;  .          
--       .;i;;;:;;rirsiLi;.rP;.;cc.r; ;tLsr,rxr;rrT7rrs5i;X@Fr,,rH@S  ,rsEC5L;;r;;;;;;;iUcLgUr   @Or:r ;B;.STxri;Lrr5ibi .;.;rc;;ts.:i;rEBBE            
--   :cSFc;;:;rr7r7rrcjr, ;Zrrcr; .  ijr;r:;rcU;risjc gc.:;j6B@#dP#Uji7;,.,.  ,:;:;;;;rTicLsjrrrrZ@BnZbbbCd;;.r;iciis;ZP. ..:;sr.isr;r   :C8@r          
--  rxCLrLsUjr:;;:.:;; .;C0;7jr,   .Ls;;: ;;r;Oriic5i L8.                     .,    .;TZr;.    ....;;;;; sT   ,;i;:Ci;S8r  . ;ic:;rir;;     .i.         
--       :cU6nc;r;;;;.;;5S;rr;.   ;xt;;.  r;;:SiictTi  B2                     .:      jr;:,              x,  .,;r :6;rjZn  ..:r;crc;rri                 
--           :rtZOLirr;5C;;:    ,sCr.;   ;rr,;cj;strr  rB ;r;rrrrrrt7,        .:     .i,,;,,.:r7;;;;;r;;0i  .  r, in.irUb  ,.rr;;iTi;:sr                
--                ,;;;OZcii;. ;isTr;;.  ,t;;;;;Zr;Ori   ;;c     7Ft;          .:     ,L,;;,.,.:cXHT,;,;BU:::. ,; ,x,rrrsb. ,;rt ;:Ucc;.Z;               
--               ,;;;cS7txs;.rtLcr;r,  .Cr:r;r.ZUrZri.    i    cT,            .:     :r:::....   rx,  iU;r,.  ;  L;;ir;rZ. :;CS;;:Exrr. i;              
--            ;Lnjjr;cctCr;rscrTcr;    ir;,c:r:5@P6nT,.   i .jF;              ,,     ;i.:.. . .   .SL7Usi;,  ;. ir.;rr;rX, ;iU;;;;xZrr,, .              
--         ,TL5jTr  iixsr;rt,.ijr:    ,C; :r,j:S0XdXt:..  rSL:               .,:     ;r,,. ..   .;: :tC67:  ;r ii,:r7T;U6, rsDi:r;sXLc,:.               
--       ,;;,      iLSs;  ;:,r5r:    .c;  : rr,tCisDg; .  .,                  ..     ;r.: . .      ;crPj:  ;c i5, ;TC;rdO: TZULtr.Tr;ir r               
--                Z2sr   i;:,ns.    ;c:.   :c;;;tc;r6P.                       .      :r..         20;FZ::.rL rt;  TC;;FDnT cXr:En.;r Fs  ;              
--               2E;   :xr  nc  .,,;X;.    :;rr:5sL;rB2                       .      .r:,       rBs rZrcriT.rT. ,5Trsggn6i LO::rUZ;i ;6;  ;             
--              7;    rT.  Cj,.; :,sr     ..;i;:r7xg,;Bc                    .;.       ;;..     Fg. ;nriLsr;xr..:ris0xCjsUi EnirirF2t  SC   :            
--             i.   ,r,   tir;r:;;,r       .;:  rit6C :8r                    ;:,.   .:r;.     ;.  ;jrr:;rcx;;r;rO6DCr5sSZ:;DOxr;2F2xr  8.   .           
--            ;    r:    sittLr7. ;r,      ;.; .LscZ0L ,c,                    .:;:.,:;:.         ,rj: ,rir;risC6E5riSxTgd:tssO6jigEnCr rP               
--                     ;STUSi.    T;.   . ; ., ,icj2n8r ..                                      .;r  r2jsc5x0ZjSLLsjTsOPE;iri rPHFXgF ;.xr              
--                    i0xL;      rr,.. ; r. ,. ;rrtSTDdr.,.                                      . ;SXiiT2gP6jjT7jijxtXFTr;:c:  ;FOPBx   :              
--                  :PZr.        s,,r ;.;, .. ,;crn5CSP#;..                                      :r;. ,7rTnXnst;irrTUtT5cC. Z7    rrj6n                 
--                 c7.          .i.r,,;rr :,..;ir77tCsC0#: .                 ...,:,;;r;,        .,   rnr;c6r;r;;r;cOcrrgT:  Es     ,;r,T                
--                ,             sxr;,7;7.;r,..rjs,;TT;5T0g,          ,bBBP2ci;r;:,;:;;iTscjs6n; . . rL;;;tb,;;;jrrxs:;dd;   U5       c.                 
--                             .6; rsC.r Lr, ;xS7 7Cr;c5s#P, ...       .:rLti;;ritj7rriLtUCSnL:..:.;;.ir DS;r;TLLCi. ZBr    iU        .                 
--                             Si ;CZ,.c:Si.;TP5  ir;;TTcFOH:  ..           .,:..   .:;;;:.   ..::.  rr r0;LCr5Ssc, rBc     ;D                          
--                             t  EPr 7rLj:;sHT  Tcc:;srrCc00r   .             ,,::;:;,. .........  j;  OsiU;5XTir  X6       D                          
--                            L  :@U  STx:iT8r  ,Pc7:;c;;rTiXbj.        . .  .. . ....,.,...,.,.  :;C  ,;OO;iOSrx  ;@        r.                         
--                            ;  rds ;On:j2@;   d7 r,rL;;;rrs0t;;;.          ..,.....,........  ,; ;r   r0;;XCrP.  dj                                   
--                               iO  jBirXb.   U5  r;js;,;;;Z8r, ,;;,         .....     ...   :r:  i,   n;;dFtO;   g                                    
--                               6r :@r gg    sZ   r;jr;.r;r6# r    :;:.           . ....   ,r;    t   .OcHrrOr                                         
--                              :D  @i n7    rt    7sj;;:r:rHi r.     .;:.            .    ;;      7   rBd .dL                                          
--                              cs Cs ,     .;     ;Os.rcc7;n  ;;        ,:,             :,.       r   B6  Pb                                           
--                              0, .                Dr iCrr;s   r           ,;:,,.,...;;:         :;  sD  ;B:                                           
--                              0                   Zr ZU; ;    ;               .,,,              :.  j   Ux                                            
--                             .F                   nr dX       ;                                 ;  :   ,#                                             
--                             :r                   cc HZ                                         . ,    n7                                             
--                                                  ,n cX                                                Z                                              
--                                                   7 .i                                               rc                                              
--                                                      r                                               O                                               
--                                                      :                                               s                                               
--                                                                                                     ,;                                               
--                                                                                                                                                      
--


require 'DamageLib'
require 'Eternal Prediction'

local ScriptVersion = "v1.5"

local function Ready(spell)
	return myHero:GetSpellData(spell).currentCd == 0 and myHero:GetSpellData(spell).level > 0 and myHero:GetSpellData(spell).mana <= myHero.mana and Game.CanUseSpell(spell) == 0 
end

local function EnemiesAround(pos, range, team)
	local Count = 0
	for i = 1, Game.HeroCount() do
		local m = Game.Hero(i)
		if m and m.team == 200 and not m.dead and m.pos:DistanceTo(pos, m.pos) < 125 then
			Count = Count + 1
		end
	end
	return Count
end

local function AlliesAround(pos, range, team)
	local Count = 0
	for i = 1, Game.HeroCount() do
		local m = Game.Hero(i)
		if m and m.team == 100 and not m.dead and m.pos:DistanceTo(pos, m.pos) < 600 then
			Count = Count + 1
		end
	end
	return Count
end

local function GetDistance(p1,p2)
return  math.sqrt(math.pow((p2.x - p1.x),2) + math.pow((p2.y - p1.y),2) + math.pow((p2.z - p1.z),2))
end

local function GetDistance2D(p1,p2)
return  math.sqrt(math.pow((p2.x - p1.x),2) + math.pow((p2.y - p1.y),2))
end

local function OnScreen(unit)
	return unit.pos:To2D().onScreen;
end
local Grasp = false
local function GetTarget(range)
	local target = nil
	if Orb == 1 then
		target = EOW:GetTarget(range)
	elseif Orb == 2 then
		target = _G.SDK.TargetSelector:GetTarget(range)
	elseif Orb == 3 then
		target = GOS:GetTarget(range)
	end
	return target
end

local intToMode = {
   	[0] = "",
   	[1] = "Combo",
   	[2] = "Harass",
   	[3] = "LastHit",
   	[4] = "Clear"
}

local function GetMode()
	if Orb == 1 then
		return intToMode[EOW.CurrentMode]
	elseif Orb == 2 then
		if _G.SDK.Orbwalker.Modes[_G.SDK.ORBWALKER_MODE_COMBO] then
			return "Combo"
		elseif _G.SDK.Orbwalker.Modes[_G.SDK.ORBWALKER_MODE_HARASS] then
			return "Harass"	
		elseif _G.SDK.Orbwalker.Modes[_G.SDK.ORBWALKER_MODE_LANECLEAR] or _G.SDK.Orbwalker.Modes[_G.SDK.ORBWALKER_MODE_JUNGLECLEAR] then
			return "Clear"
		elseif _G.SDK.Orbwalker.Modes[_G.SDK.ORBWALKER_MODE_LASTHIT] then
			return "LastHit"
		elseif _G.SDK.Orbwalker.Modes[_G.SDK.ORBWALKER_MODE_FLEE] then
			return "Flee"
		end
	else
		return GOS.GetMode()
	end
end

local function EnableOrb(bool)
	if Orb == 1 then
		EOW:SetMovements(bool)
		EOW:SetAttacks(bool)
	elseif Orb == 2 then
		_G.SDK.Orbwalker:SetMovement(bool)
		_G.SDK.Orbwalker:SetAttack(bool)
	else
		GOS.BlockMovement = not bool
		GOS.BlockAttack = not bool
	end
end

class "Ezreal"

function Ezreal:__init()
	if _G.EOWLoaded then
		Orb = 1
	elseif _G.SDK and _G.SDK.Orbwalker then
		Orb = 2
	end
	self:LoadSpells()
	self:LoadMenu()
	Callback.Add("Tick", function() self:Tick() end)
	Callback.Add("Draw", function() self:Draw() end)
end

function Ezreal:LoadSpells()
	Q = { range = myHero:GetSpellData(_Q).range, delay = myHero:GetSpellData(_Q).delay, speed = myHero:GetSpellData(_Q).speed, width = myHero:GetSpellData(_Q).width, icon = "https://vignette1.wikia.nocookie.net/leagueoflegends/images/5/5a/Mystic_Shot.png" }
	W = { range = myHero:GetSpellData(_W).range, delay = myHero:GetSpellData(_W).delay, speed = myHero:GetSpellData(_W).speed, width = myHero:GetSpellData(_W).width, icon = "https://vignette1.wikia.nocookie.net/leagueoflegends/images/9/9e/Essence_Flux.png" }
	E = { range = myHero:GetSpellData(_E).range, delay = myHero:GetSpellData(_E).delay, speed = myHero:GetSpellData(_E).speed, width = myHero:GetSpellData(_E).width, icon = "https://vignette4.wikia.nocookie.net/leagueoflegends/images/f/fb/Arcane_Shift.png" }
	R = { range = myHero:GetSpellData(_R).range, delay = myHero:GetSpellData(_R).delay, speed = myHero:GetSpellData(_R).speed, width = myHero:GetSpellData(_R).width, icon = "https://vignette3.wikia.nocookie.net/leagueoflegends/images/0/02/Trueshot_Barrage.png" }
end

function Ezreal:LoadMenu()
	Tocsin = MenuElement({type = MENU, id = "Ezreal_Tocsin", name = "Ezreal_Tocsin"})
	Tocsin:MenuElement({name = "Ezreal", drop = {ScriptVersion}, leftIcon = "https://vignette2.wikia.nocookie.net/leagueoflegends/images/e/ec/Ezreal_OriginalLoading.jpg"})
	
------Combo

	Tocsin:MenuElement({type = MENU, id = "Combo", name = "Combo Settings"})
	Tocsin.Combo:MenuElement({id = "Q", name = "Use [Q]", value = true, leftIcon = Q.icon})
	Tocsin.Combo:MenuElement({id = "W", name = "Use [W]", value = true, leftIcon = W.icon})
	Tocsin.Combo:MenuElement({id = "E", name = "Use [E]", value = true, leftIcon = E.icon})
	Tocsin.Combo:MenuElement({id = "R", name = "Use [R]", value = true, leftIcon = R.icon})
	
------Clear

	Tocsin:MenuElement({type = MENU, id = "Clear", name = "Clear Settings"})
	Tocsin.Clear:MenuElement({id = "Q", name = "Use [Q]", value = true, leftIcon = Q.icon})
	Tocsin.Clear:MenuElement({id = "E", name = "Use [E]", value = true, leftIcon = E.icon})
	Tocsin.Clear:MenuElement({id = "Mana", name = "Min Mana to Clear [%]", value = 0.40, min = 0.05, max = 1, step = 0.01})
	
------Harass

	Tocsin:MenuElement({type = MENU, id = "Harass", name = "Harass Settings"})
	Tocsin.Harass:MenuElement({id = "Q", name = "Use [Q]", value = true, leftIcon = Q.icon})
	Tocsin.Harass:MenuElement({id = "W", name = "Use [W]", value = true, leftIcon = W.icon})
	Tocsin.Harass:MenuElement({id = "Mana", name = "Min Mana to Harass [%]", value = 0.40, min = 0.05, max = 1, step = 0.01})
	
------Misc

	Tocsin:MenuElement({type = MENU, id = "Misc", name = "Misc Settings"})
	Tocsin.Misc:MenuElement({id = "Qks", name = "Killsecure [Q]", value = true, leftIcon = Q.icon})
	Tocsin.Misc:MenuElement({id = "Wks", name = "Killsecure [W]", value = true, leftIcon = W.icon})
	Tocsin.Misc:MenuElement({id = "Rks", name = "Killsecure [R]", value = true, leftIcon = R.icon})
	Tocsin.Misc:MenuElement({id = "Rkey", name = "Semi-Manual [R] Key [?]", key = string.byte("T"), tooltip = "Manually select your target before pressing the key"})
	

------Eternal Prediction

	Tocsin:MenuElement({type = MENU, id = "Pred", name = "Prediction Settings"})
	Tocsin.Pred:MenuElement({type = SPACE, id = "Pred Info", name = "If you go too high it wont fire"})
	Tocsin.Pred:MenuElement({id = "QChance", name = "QPrediction Hitchance", value = 0.200, min = 0.05, max = 1, step = 0.010})
	Tocsin.Pred:MenuElement({id = "WChance", name = "WPrediction Hitchance", value = 0.175, min = 0.05, max = 1, step = 0.010})
	Tocsin.Pred:MenuElement({id = "RChance", name = "RPrediction Hitchance", value = 0.250, min = 0.05, max = 1, step = 0.010})
	
------Draw

	Tocsin:MenuElement({type = MENU, id = "Draw", name = "Draw Settings"})
	Tocsin.Draw:MenuElement({id = "Q", name = "Draw [Q] Range", value = true, leftIcon = W.icon})
	Tocsin.Draw:MenuElement({id = "DMG", name = "Draw Combo Damage", value = true})
end

function Ezreal:Tick()
	if myHero.dead or Grasp == true then return end
	local Mode = GetMode()
	if Mode == "Combo" then
		self:Combo()
	elseif Mode == "Harass" then
		self:Harass()
	elseif Mode == "Clear" then
		self:Clear()
	end
		self:Misc()
end

function Ezreal:Combo()
	local target = GetTarget(1300)
	if not target then return end
	if Tocsin.Combo.Q:Value() and Ready(_Q) and myHero.pos:DistanceTo(target.pos) < 1150 then
		self:CastQ(target)
	end
	if Tocsin.Combo.W:Value() and Ready(_W)and myHero.pos:DistanceTo(target.pos) < 950 then
		self:CastW(target)
	end
	if Tocsin.Combo.E:Value() and Ready(_E)and myHero.pos:DistanceTo(target.pos) < 1100 then
		self:CastE(target)
	end
	if Tocsin.Combo.R:Value() and Ready(_R) then
		if  myHero.pos:DistanceTo(target.pos) > 800 then
			local lvl = myHero:GetSpellData(_R).level
			local Rdmg = (({350, 500, 650})[lvl] + 0.80 * myHero.bonusDamage + 0.6 * myHero.ap)
			if  Rdmg > target.health *1.1 + target.shieldAP then
				self:CastR(target)
			end
		end
	end

end

function Ezreal:Harass()
	local target = GetTarget(1200)
	if myHero.mana/myHero.maxMana < Tocsin.Harass.Mana:Value() then return end
	if not target then return end
	if Tocsin.Harass.Q:Value() and Ready(_Q)and myHero.pos:DistanceTo(target.pos) < 1150 then
		self:CastQ(target)
	end
	if Tocsin.Harass.W:Value() and Ready(_W)and myHero.pos:DistanceTo(target.pos) < 950 then
		self:CastW(target)
	end
end

function Ezreal:Clear()
	if myHero.mana/myHero.maxMana < Tocsin.Clear.Mana:Value() then return end
	for i = 1, Game.MinionCount() do
		local minion = Game.Minion(i)
		if  minion.team ~= myHero.team then
			if  Tocsin.Clear.Q:Value() and Ready(_Q) and myHero.pos:DistanceTo(minion.pos) < 1150 then
				self:CastQ(minion)
			end
			if  Tocsin.Clear.E:Value() and Ready(_E) and myHero.pos:DistanceTo(minion.pos) < 950 then
				self:CastE(minion)
			end
		end
	end
end

function Ezreal:Misc()
	local target = GetTarget(20000)
	if not target then return end
		if Tocsin.Misc.Rkey:Value() and Ready(_R) then
		self:CastR(target)
	end
end

function Ezreal:CastQ(target)
	local Qdata = {speed = 1200, delay = 0.25, range = 1150, width = 60}
	local Qspell = Prediction:SetSpell(Qdata, TYPE_LINEAR, true)
	local pred = Qspell:GetPrediction(target,myHero.pos)
	if  myHero.pos:DistanceTo(target.pos) < 1100 then
		if myHero.attackData.state == STATE_WINDDOWN then
			if pred and pred.hitChance >= Tocsin.Pred.QChance:Value() and pred:mCollision() == 0 and pred:hCollision() == 0 then
				EnableOrb(false)
				Control.CastSpell(HK_Q, pred.castPos)
				Grasp = true
				DelayAction(function() Grasp = false EnableOrb(true) end, 0.2)
				Control.Attack(target)
			end
		end
	end
	if  myHero.pos:DistanceTo(target.pos) > myHero.range then
		if pred and pred.hitChance >= Tocsin.Pred.QChance:Value() and pred:mCollision() == 0 and pred:hCollision() == 0 then
			EnableOrb(false)
			Control.CastSpell(HK_Q, pred.castPos)
			Grasp = true
			DelayAction(function() Grasp = false EnableOrb(true) end, 0.2)
		end
	end
end

function Ezreal:CastW(target)
	local Wdata = {speed = 1200, delay = 0.25, range = 950, width = 80}
	local Wspell = Prediction:SetSpell(Wdata, TYPE_LINEAR, false)
	local pred = Wspell:GetPrediction(target,myHero.pos)
	if  myHero.pos:DistanceTo(target.pos) < myHero.range then
		if myHero.attackData.state == STATE_WINDDOWN then
			if pred and pred.hitChance >= Tocsin.Pred.WChance:Value() then
				EnableOrb(false)
				Control.CastSpell(HK_W, pred.castPos)
				Grasp = true
				DelayAction(function() Grasp = false EnableOrb(true) end, 0.3)
				Control.Attack(target)
			end
		end
	end
	if  myHero.pos:DistanceTo(target.pos) > myHero.range then
		if pred and pred.hitChance >= Tocsin.Pred.WChance:Value() then
			EnableOrb(false)
			Control.CastSpell(HK_W, pred.castPos)
			Grasp = true
			DelayAction(function() Grasp = false EnableOrb(true) end, 0.3)
		end
	end
end

function Ezreal:CastE(target)
	local Edata = {speed = 2000, delay = 0.25,range = 450 }
	if  myHero.pos:DistanceTo(target.pos) < myHero.range then
		if myHero.attackData.state == STATE_WINDDOWN then
			Control.CastSpell(HK_E)
			Control.Attack(target)
		end
	end
	if  myHero.pos:DistanceTo(target.pos) > myHero.range then
			Control.CastSpell(HK_E)
	end
end

function Ezreal:CastR(target)
	local Rdata = {speed = 2000, delay = 1.05, range = 20000, width = 160 }
	local Rspell = Prediction:SetSpell(Rdata, TYPE_LINE, false)
	local pred = Rspell:GetPrediction(target, myHero.pos)
	if OnScreen(target) then
		if pred and pred.hitChance >= Tocsin.Pred.RChance:Value() then
			EnableOrb(false)
			Control.CastSpell(HK_R, pred.castPos)
			Grasp = true
			DelayAction(function() Grasp = false EnableOrb(true) end, 0.90)
		end
	end 
	if not OnScreen(target) then
		if pred and pred.hitChance >= Tocsin.Pred.RChance:Value() then
			EnableOrb(false)
			Grasp = true
			Control.SetCursorPos(pred.castPos:ToMM().x,pred.castPos:ToMM().y)
			Control.KeyDown(HK_R)
			Control.KeyUp(HK_R)
			DelayAction(function() Grasp = false EnableOrb(true) end, 0.80)
		end
	end
end

function Ezreal:GetComboDamage(unit)
	local Total = 0
	if Ready(_Q) then
		local Qlvl = myHero:GetSpellData(_Q).level
		local Qdmg = (({35, 55, 75, 95, 115})[Qlvl] + myHero.totalDamage)
		Total = Total + Qdmg
	end
	if Ready(_W) then
		local Wlvl = myHero:GetSpellData(_W).level
		local Wdmg = (({70, 115, 160, 205, 250})[Wlvl] + .8 * myHero.ap) --70 / 115 / 160 / 205 / 250 (+ 80% AP)
		Total = Total + Wdmg
	end
	if Ready(_R) then
		local Rlvl = myHero:GetSpellData(_R).level
		local Rdmg = (({350, 500, 650})[Rlvl] + myHero.bonusDamage)
		Total = Total + Rdmg
	end
	return Total
end

function Ezreal:Draw()
	if Tocsin.Draw.Q:Value() and Ready(_Q) then Draw.Circle(myHero.pos, 1150, 3,  Draw.Color(255,255, 162, 000)) end
	if Tocsin.Draw.DMG:Value() then
		for i = 1, Game.HeroCount() do
			local enemy = Game.Hero(i)
			if enemy and enemy.isEnemy and not enemy.dead then
				if OnScreen(enemy) then
				local rectPos = enemy.hpBar
					if self:GetComboDamage(enemy) < enemy.health then
						Draw.Rect(rectPos.x , rectPos.y ,(tostring(math.floor(self:GetComboDamage(enemy)/enemy.health*100)))*((enemy.health/enemy.maxHealth)),10, Draw.Color(150, 000, 000, 255)) 
					else
						Draw.Rect(rectPos.x , rectPos.y ,((enemy.health/enemy.maxHealth)*100),10, Draw.Color(150, 255, 255, 000)) 
					end
				end
			end
		end
	end
end

Callback.Add("Load", function()
	if myHero.charName ~= "Ezreal" then return end
	if not _G.Prediction_Loaded then return end
	if _G[myHero.charName] then
		_G[myHero.charName]()
		print("Tocsin "..myHero.charName.." "..ScriptVersion.." Loaded")
	else print ("Tocsin doesn't support "..myHero.charName.." shutting down...") return
	end
end)